-- 테이블 순서는 관계를 고려하여 한 번에 실행해도 에러가 발생하지 않게 정렬되었습니다.

-- User Table Create SQL
CREATE TABLE User
(
    `userIdx`         INT             NOT NULL    AUTO_INCREMENT COMMENT '유저인덱스', 
    `userName`        VARCHAR(45)     NOT NULL    COMMENT '유저네임', 
    `userID`          VARCHAR(45)     NOT NULL    COMMENT '유저아이디', 
    `phoneNumber`     VARCHAR(45)     NULL        COMMENT '유저폰넘버', 
    `houseAddress`    VARCHAR(100)    NULL        COMMENT '유저집', 
    `companyAddress`  VARCHAR(100)    NULL        COMMENT '유저회사', 
    `createdAt`       TIMESTAMP       NOT NULL    DEFAULT CURRENT_TIMESTAMP COMMENT '생성', 
    `updatedAt`       TIMESTAMP       NOT NULL    DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '수정', 
    `isDeleted`       CHAR(1)         NOT NULL    DEFAULT 'N' COMMENT '삭제', 
    PRIMARY KEY (userIdx)
);

ALTER TABLE User COMMENT '유저테이블';


-- User Table Create SQL
CREATE TABLE Store
(
    `storeIdx`         INT               NOT NULL    AUTO_INCREMENT COMMENT '매장 인덱스', 
    `storeName`        VARCHAR(45)       NOT NULL    COMMENT '매장이름', 
    `businessName`     VARCHAR(45)       NOT NULL    COMMENT '상호명', 
    `deliveryFee`      INT               NULL        COMMENT '배달비', 
    `minOrderCost`     INT               NOT NULL    COMMENT '최소주문', 
    `storeStar`        DECIMAL(2, 1)     NOT NULL    COMMENT '평균별점', 
    `isCheetah`        CHAR(1)           NOT NULL    DEFAULT 'N' COMMENT '치타배달', 
    `isFranchise`      CHAR(1)           NOT NULL    DEFAULT 'N' COMMENT '인기프랜차이즈', 
    `storeCatIdx`      INT               NOT NULL    COMMENT '카테고리인덱스', 
    `address`          VARCHAR(100)      NOT NULL    COMMENT '위치', 
    `latitude`         DECIMAL(17,14)    NOT NULL    COMMENT '위도', 
    `longitude`        DECIMAL(17,14)    NOT NULL    COMMENT '경도', 
    `telephoneNumber`  VARCHAR(45)       NOT NULL    COMMENT '매장 전화번호', 
    `representation`   VARCHAR(45)       NOT NULL    COMMENT '대표자명', 
    `corporateNumber`  VARCHAR(45)       NOT NULL    COMMENT '사업자등록번호', 
    `officeHour`       VARCHAR(100)      NOT NULL    COMMENT '영업시간', 
    `storeIntroduce`   VARCHAR(500)      NOT NULL    COMMENT '매장소개', 
    `originInfo`       TEXT              NOT NULL    COMMENT '원산지정보', 
    `nutrientInfo`     TEXT              NULL        COMMENT '영양성분 정보', 
    `allergyInfo`      TEXT              NULL        COMMENT '알레르기 유발성분 정보', 
    `createdAt`        TIMESTAMP         NOT NULL    DEFAULT CURRENT_TIMESTAMP COMMENT '생성', 
    `updatedAt`        TIMESTAMP         NOT NULL    DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '수정', 
    `isDeleted`        CHAR(1)           NOT NULL    DEFAULT 'N' COMMENT '삭제', 
    `deliveryTime`     VARCHAR(45)       NOT NULL    COMMENT '배달시간', 
    PRIMARY KEY (storeIdx)
);

ALTER TABLE Store COMMENT '매장 테이블';


-- User Table Create SQL
CREATE TABLE Review
(
    `reviewIdx`   INT                 NOT NULL    AUTO_INCREMENT COMMENT '리뷰인덱스', 
    `userIdx`     INT                 NOT NULL    COMMENT '유저인덱스', 
    `storeIdx`    INT                 NOT NULL    COMMENT '매장인덱스', 
    `content`     VAINTRCHAR(1000)    NULL        COMMENT '리뷰내용', 
    `orderMenu`   VARCHAR(1000)       NOT NULL    COMMENT '주문메뉴', 
    `reviewStar`  INT                 NOT NULL    COMMENT '별점', 
    `createdAt`   TIMESTAMP           NOT NULL    DEFAULT CURRENT_TIMESTAMP COMMENT '생성', 
    `updatedAt`   TIMESTAMP           NOT NULL    DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '수정', 
    `isDeleted`   CHAR(1)             NOT NULL    DEFAULT 'N' COMMENT '삭제', 
    PRIMARY KEY (reviewIdx)
);

ALTER TABLE Review COMMENT '리뷰테이블';


-- User Table Create SQL
CREATE TABLE StorePhoto
(
    `storeIdx`    INT          NOT NULL    COMMENT '매장인덱스', 
    `storePhoto`  TEXT         NOT NULL    COMMENT '매장사진', 
    `sequence`    INT          NOT NULL    COMMENT '순서', 
    `createdAt`   TIMESTAMP    NOT NULL    DEFAULT CURRENT_TIMESTAMP COMMENT '생성', 
    `updatedAt`   TIMESTAMP    NOT NULL    DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '수정', 
    `isDeleted`   CHAR(1)      NOT NULL    DEFAULT 'N' COMMENT '삭제'
);

ALTER TABLE StorePhoto COMMENT '매장 대표사진';


-- User Table Create SQL
CREATE TABLE StoreCategory
(
    `storeCatIdx`   INT            NOT NULL    AUTO_INCREMENT COMMENT '카테고리인덱스', 
    `storeCatName`  VARCHAR(45)    NOT NULL    COMMENT '카테고리네임', 
    `createdAt`     TIMESTAMP      NOT NULL    DEFAULT CURRENT_TIMESTAMP COMMENT '생성', 
    `updatedAt`     TIMESTAMP      NOT NULL    DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '수정', 
    `isDeleted`     CHAR(1)        NOT NULL    DEFAULT 'N' COMMENT '삭제', 
    PRIMARY KEY (storeCatIdx)
);

ALTER TABLE StoreCategory COMMENT '매장카테고리';


-- User Table Create SQL
CREATE TABLE Hart
(
    `storeIdx`   INT          NOT NULL    COMMENT '매장 인덱스', 
    `userIdx`    INT          NOT NULL    COMMENT '유저 인덱스', 
    `createdAt`  TIMESTAMP    NOT NULL    DEFAULT CURRENT_TIMESTAMP COMMENT '생성', 
    `updatedAt`  TIMESTAMP    NOT NULL    DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '수정', 
    `isDeleted`  CHAR(1)      NOT NULL    DEFAULT 'N' COMMENT '삭제'
);

ALTER TABLE Hart COMMENT '관심매장';


-- User Table Create SQL
CREATE TABLE ReviewPlus
(
    `reviewIdx`  INT          NOT NULL    COMMENT '리뷰인덱스', 
    `userIdx`    INT          NOT NULL    COMMENT '유저인덱스', 
    `createdAt`  TIMESTAMP    NOT NULL    DEFAULT CURRENT_TIMESTAMP COMMENT '생성', 
    `updatedAt`  TIMESTAMP    NOT NULL    DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '수정', 
    `isDeleted`  CHAR(1)      NOT NULL    DEFAULT 'N' COMMENT '삭제'
);

ALTER TABLE ReviewPlus COMMENT '도움되는 리뷰 테이블';


-- User Table Create SQL
CREATE TABLE ReviewMinus
(
    `reviewIdx`  INT          NOT NULL    COMMENT '리뷰인덱스', 
    `userIdx`    INT          NOT NULL    COMMENT '유저인덱스', 
    `createdAt`  TIMESTAMP    NOT NULL    DEFAULT CURRENT_TIMESTAMP COMMENT '생성', 
    `updatedAt`  TIMESTAMP    NOT NULL    DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '수정', 
    `isDeleted`  CHAR(1)      NOT NULL    DEFAULT 'N' COMMENT '삭제'
);

ALTER TABLE ReviewMinus COMMENT '도움안되는 리뷰테이블';


-- User Table Create SQL
CREATE TABLE Promotion
(
    `promotionIdx`    INT            NOT NULL    AUTO_INCREMENT COMMENT '프로모션인덱스', 
    `promotionPhoto`  TEXT           NOT NULL    COMMENT '프로모션사진', 
    `title`           VARCHAR(45)    NOT NULL    COMMENT '프로모션제목', 
    `createdAt`       TIMESTAMP      NOT NULL    DEFAULT CURRENT_TIMESTAMP COMMENT '생성', 
    `updatedAt`       TIMESTAMP      NOT NULL    DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '수정', 
    `isDeleted`       CHAR(1)        NOT NULL    DEFAULT 'N' COMMENT '삭제', 
    PRIMARY KEY (promotionIdx)
);

ALTER TABLE Promotion COMMENT '프로모션테이블';


-- User Table Create SQL
CREATE TABLE Menu
(
    `storeIdx`       INT             NOT NULL    COMMENT '매장인덱스', 
    `menuIdx`        INT             NOT NULL    COMMENT '메뉴인덱스', 
    `menuName`       VARCHAR(45)     NOT NULL    COMMENT '메뉴명', 
    `menuDetail`     VARCHAR(100)    NULL        COMMENT '메뉴설명', 
    `menuCatIdx`     INT             NOT NULL    COMMENT '메뉴카테고리인덱스', 
    `menuCatName`    VARCHAR(45)     NOT NULL    COMMENT '메뉴카테고리', 
    `menuCatDetail`  VARCHAR(500)    NULL        COMMENT '메뉴카테고리설명', 
    `price`          INT             NOT NULL    COMMENT '가격', 
    `createdAt`      TIMESTAMP       NOT NULL    DEFAULT CURRENT_TIMESTAMP COMMENT '생성', 
    `updatedAt`      TIMESTAMP       NOT NULL    DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '수정', 
    `isDeleted`      CHAR(1)         NOT NULL    DEFAULT 'N' COMMENT '삭제'
);

ALTER TABLE Menu COMMENT '메뉴테이블';


-- User Table Create SQL
CREATE TABLE MenuOption
(
    `menuIdx`        INT            NOT NULL    COMMENT '메뉴인덱스', 
    `menuOptionIdx`  INT            NOT NULL    COMMENT '메뉴옵션인덱스', 
    `optionCatIdx`   INT            NOT NULL    COMMENT '옵션카테고리인덱스', 
    `optinCatName`   VARCHAR(45)    NOT NULL    COMMENT '옵션카테고리네임', 
    `price`          INT            NULL        COMMENT '가격', 
    `option`         VARCHAR(45)    NULL        COMMENT '옵션', 
    `createdAt`      TIMESTAMP      NOT NULL    DEFAULT CURRENT_TIMESTAMP COMMENT '생성', 
    `updatedAt`      TIMESTAMP      NOT NULL    DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '수정', 
    `isDeleted`      CHAR(1)        NOT NULL    DEFAULT 'N' COMMENT '삭제'
);

ALTER TABLE MenuOption COMMENT '메뉴옵션 테이블';


-- User Table Create SQL
CREATE TABLE StoreCoupon
(
    `couponIdx`  INT          NOT NULL    COMMENT '쿠폰인덱스', 
    `storeIdx`   INT          NOT NULL    COMMENT '매장인덱스', 
    `createdAt`  TIMESTAMP    NOT NULL    DEFAULT CURRENT_TIMESTAMP COMMENT '생성', 
    `updatedAt`  TIMESTAMP    NOT NULL    DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '수정', 
    `isDeleted`  CHAR(1)      NOT NULL    DEFAULT 'N' COMMENT '삭제'
);

ALTER TABLE StoreCoupon COMMENT '업체쿠폰';


-- User Table Create SQL
CREATE TABLE Coupon
(
    `couponIdx`    INT            NOT NULL    AUTO_INCREMENT COMMENT '쿠폰인덱스', 
    `couponTitle`  VARCHAR(45)    NOT NULL    COMMENT '쿠폰 명칭', 
    `salePrice`    INT            NOT NULL    COMMENT '할인 가격', 
    `expiredAt`    DATE           NOT NULL    COMMENT '만료일', 
    `minPrice`     INT            NULL        COMMENT '최소주문금액', 
    `createdAt`    TIMESTAMP      NOT NULL    DEFAULT CURRENT_TIMESTAMP COMMENT '생성', 
    `updatedAt`    TIMESTAMP      NOT NULL    DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '수정', 
    `isDeleted`    CHAR(1)        NOT NULL    DEFAULT 'N' COMMENT '삭제', 
    PRIMARY KEY (couponIdx)
);


-- User Table Create SQL
CREATE TABLE OrderDetail
(
    `orderIdx`       INT          NOT NULL    COMMENT '주문인덱스', 
    `menuIdx`        INT          NOT NULL    COMMENT '메뉴인덱스', 
    `menuOptionIdx`  INT          NULL        COMMENT '메뉴옵션인덱스', 
    `menuQuantity`   INT          NOT NULL    DEFAULT 1 COMMENT '수량', 
    `createdAt`      TIMESTAMP    NOT NULL    DEFAULT CURRENT_TIMESTAMP COMMENT '생성', 
    `updatedAt`      TIMESTAMP    NOT NULL    DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '수정', 
    `isDeleted`      CHAR(1)      NOT NULL    DEFAULT 'N' COMMENT '삭제'
);

ALTER TABLE OrderDetail COMMENT '주문상세테이블';


-- User Table Create SQL
CREATE TABLE UserCoupon
(
    `couponIdx`  INT          NOT NULL    COMMENT '쿠폰인덱스', 
    `userIdx`    INT          NOT NULL    COMMENT '유저인덱스', 
    `createdAt`  TIMESTAMP    NOT NULL    DEFAULT CURRENT_TIMESTAMP COMMENT '생성', 
    `updatedAt`  TIMESTAMP    NOT NULL    DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '수정', 
    `isDeleted`  CHAR(1)      NOT NULL    DEFAULT 'N' COMMENT '삭제'
);

ALTER TABLE UserCoupon COMMENT '유저쿠폰 테이블';


-- User Table Create SQL
CREATE TABLE PaymentMethod
(
    `paymentIdx`    INT            NOT NULL    AUTO_INCREMENT COMMENT '결제인덱스', 
    `houseAddress`  INT            NOT NULL    COMMENT '유저 인덱스', 
    `cardName`      VARCHAR(45)    NOT NULL    COMMENT '카드이름', 
    `cardNumber`    VARCHAR(45)    NOT NULL    COMMENT '카드번호', 
    `mm`            INT            NOT NULL    COMMENT '유효기간MM', 
    `yy`            INT            NOT NULL    COMMENT '유효기간YY', 
    `cvc`           INT            NOT NULL    COMMENT 'CVC', 
    `password`      INT            NOT NULL    COMMENT '패스워드', 
    `createdAt`     TIMESTAMP      NOT NULL    DEFAULT CURRENT_TIMESTAMP COMMENT '생성', 
    `updatedAt`     TIMESTAMP      NOT NULL    DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '수정', 
    `isDeleted`     CHAR(1)        NOT NULL    DEFAULT 'N' COMMENT '삭제', 
    PRIMARY KEY (paymentIdx)
);

ALTER TABLE PaymentMethod COMMENT '결제수단테이블';


-- User Table Create SQL
CREATE TABLE OrderInfo
(
    `orderIdx`    INT            NOT NULL    AUTO_INCREMENT COMMENT '주문인덱스', 
    `userIdx`     INT            NOT NULL    COMMENT '유저인덱스', 
    `paymentIdx`  INT            NOT NULL    COMMENT '결제인덱스', 
    `orderPrice`  INT            NOT NULL    COMMENT '주문총금액', 
    `toStore`     VARCHAR(45)    NULL        COMMENT '가게사장님에게', 
    `noPlastic`   CHAR(1)        NULL        DEFAULT 'N' COMMENT '노플라스틱', 
    `reqCatIdx`   INT            NULL        COMMENT '배달기사님에게', 
    `orderState`  INT            NOT NULL    COMMENT '주문상태', 
    `orderTime`   DATETIME       NOT NULL    COMMENT '주문시간', 
    `createdAt`   TIMESTAMP      NOT NULL    DEFAULT CURRENT_TIMESTAMP COMMENT '생성', 
    `updatedAt`   TIMESTAMP      NOT NULL    DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '수정', 
    `isDeleted`   CHAR(1)        NOT NULL    DEFAULT 'N' COMMENT '삭제', 
    PRIMARY KEY (orderIdx)
);

ALTER TABLE OrderInfo COMMENT '주문';


-- User Table Create SQL
CREATE TABLE DeliveryReq
(
    `reqCatIdx`   INT            NOT NULL    AUTO_INCREMENT COMMENT '요청카테고리인덱스', 
    `reqCatName`  VARCHAR(45)    NOT NULL    COMMENT '요청카테고리명', 
    `createdAt`   TIMESTAMP      NOT NULL    DEFAULT CURRENT_TIMESTAMP COMMENT '생성', 
    `updatedAt`   TIMESTAMP      NOT NULL    DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '수정', 
    `isDeleted`   CHAR(1)        NOT NULL    DEFAULT 'N' COMMENT '삭제', 
    PRIMARY KEY (reqCatIdx)
);

ALTER TABLE DeliveryReq COMMENT '배달요청메시지';


-- User Table Create SQL
CREATE TABLE OrderState
(
    `orderStateIdx`   INT            NOT NULL    AUTO_INCREMENT COMMENT '주문상태인덱스', 
    `orderStateName`  VARCHAR(45)    NOT NULL    COMMENT '주문상태명', 
    `createdAt`       TIMESTAMP      NOT NULL    DEFAULT CURRENT_TIMESTAMP COMMENT '생성', 
    `updatedAt`       TIMESTAMP      NOT NULL    DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '수정', 
    `isDeleted`       CHAR(1)        NOT NULL    DEFAULT 'N' COMMENT '삭제', 
    PRIMARY KEY (orderStateIdx)
);


-- User Table Create SQL
CREATE TABLE MenuPhoto
(
    `menuIdx`    INT          NOT NULL    COMMENT '메뉴인덱스', 
    `menuPhoto`  TEXT         NOT NULL    COMMENT '메뉴사진', 
    `sequence`   INT          NOT NULL    COMMENT '순서', 
    `createdAt`  TIMESTAMP    NOT NULL    DEFAULT CURRENT_TIMESTAMP COMMENT '생성', 
    `updatedAt`  TIMESTAMP    NOT NULL    DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '수정', 
    `isDeleted`  CHAR(1)      NOT NULL    DEFAULT 'N' COMMENT '삭제'
);

ALTER TABLE MenuPhoto COMMENT '메뉴사진테이블';


-- User Table Create SQL
CREATE TABLE ReviewPhoto
(
    `reviewIdx`    INT          NOT NULL    COMMENT '리뷰인덱스', 
    `reviewPhoto`  TEXT         NULL        COMMENT '포토리뷰', 
    `sequence`     INT          NOT NULL    COMMENT '순서', 
    `createdAt`    TIMESTAMP    NOT NULL    DEFAULT CURRENT_TIMESTAMP COMMENT '생성', 
    `updatedAt`    TIMESTAMP    NOT NULL    DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '수정', 
    `isDeleted`    CHAR(1)      NOT NULL    DEFAULT 'N' COMMENT '삭제'
);

ALTER TABLE ReviewPhoto COMMENT '리뷰사진테이블';


